<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Log in Monthly</title>
    <meta name="description" content="Manage your monthly and yearly plan. With a Monthly overview.">
    <link rel="stylesheet" type="text/css" href="style/general.css"/>
    <link rel="stylesheet" type="text/css" href="style/index.css"/>
    <link rel="icon" href="img/logo.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-auth.js"></script>
    <script type="text/javascript">
    // Initialize Firebase
    var config = {
        apiKey: "AIzaSyD77J1VxgxPKF841VARqyJaII9eIcE0bkk",
        authDomain: "monthly-d8c28.firebaseapp.com",
        // databaseURL: "https://monthly-d8c28.firebaseio.com",
        projectId: "monthly-d8c28",
        storageBucket: "monthly-d8c28.appspot.com"
    };
    firebase.initializeApp(config);
    </script>
</head>
<body>
    <!-- [if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
    <![endif] -->
    <ul class="navbar">
        <li><a href="/intro.html">Monthly</a></li>
        <li><a href="/index.html">Log in</a></li>
    </ul>
    <h2>Monthly<sup>ðŸˆ·</sup> User Sign Up</h2>
    <a href="/intro.html"><img src="img/bg.png" alt="logo"></a>
    <form class="" action="javascript:sign_up();">
        <label>Email<br></label>
        <input type="email" name="username" id="username" value="">
        <br>
        <label>Password (6 characters minimum)<br></label>
        <input type="password" id="password" pattern=".{6,}" name="password" value="" required autocomplete="on">
        <br>
        <label>Re-enter Password<br></label>
        <input type="password" id="password2"  pattern=".{6,}" name="password" value="" required autocomplete="on">
        <br>
        <!-- <input type="button" id="button" name="sign_up_btn" value="Log in"> -->
        <button style="font-size:18px" type="submit" id="button" name="button">Sign Up</button>
        <br>
        <small>By checking Sign Up, you agree with our <a href="#">privacy policy</a>
            and <a href="#">terms</a>.</small>
        </form>
        <br>
        <footer>
            <hr>
            <p>&copy; Monthly. All rights reserved. 2018</p>
        </footer>
        <script type="text/javascript">
        function sign_up(){


            let email = document.getElementById('username').value;
            let password = document.getElementById('password').value;
            let password2 = document.getElementById('password2').value;
            if (password != password2){
                alert("Please enter the same passwords.").
                return;
            }
            firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) {
                // Handle Errors here.
                var errorCode = error.code;
                console.log(errorCode);
                var errorMessage = error.message;
                alert(errorMessage);
            });
            firebase.auth().onAuthStateChanged(function(user) {
                if (user) {
                    user.sendEmailVerification().then(function() {
                      // Email sent.
                      alert("An verification link has been sent to your email!");
                      localStorage.offline = false;
                      window.location.href='/index.html';
                  });

                }
            });
            // localStorage.offline = false;
            // window.location.href = "/yearly.html";
        };


    </script>
</body>

</html>
